{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { useState, useEffect } from \"react\";\nimport database, { defaultUserData } from \"./database\";\n\nfunction useUserData() {\n  _s();\n\n  const {\n    user,\n    isLoading: isLoadingAuth,\n    isAuthenticated\n  } = useAuth0();\n  const [userData, setUserData] = useState({\n    isLoaded: false,\n    data: defaultUserData\n  });\n  useEffect(() => {\n    if (!isLoadingAuth && isAuthenticated && !userData.isLoaded) {\n      async function loadUserData() {\n        console.log({\n          user\n        });\n        database.getUserData(user.sub).then(data => {\n          setUserData({\n            isLoaded: true,\n            data: data\n          });\n        });\n      }\n\n      loadUserData();\n    }\n  });\n  return {\n    isLoadingAuth,\n    isAuthenticated,\n    isLoadedUser: userData.isLoaded,\n    userData: userData.data,\n    userID: user ? user.sub : null\n  };\n}\n\n_s(useUserData, \"eWmjvw7ZiUffQ4CyCbNKFT4JTto=\", false, function () {\n  return [useAuth0];\n});\n\nexport default useUserData;","map":{"version":3,"sources":["D:/Bureau/React APP/coman-app/src/utils/useUserData.jsx"],"names":["useAuth0","useState","useEffect","database","defaultUserData","useUserData","user","isLoading","isLoadingAuth","isAuthenticated","userData","setUserData","isLoaded","data","loadUserData","console","log","getUserData","sub","then","isLoadedUser","userID"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,oBAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,QAAP,IAAmBC,eAAnB,QAA0C,YAA1C;;AAEA,SAASC,WAAT,GAAuB;AAAA;;AAEnB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,SAAS,EAAEC,aAAnB;AAAkCC,IAAAA;AAAlC,MAAsDT,QAAQ,EAApE;AACA,QAAM,CAAEU,QAAF,EAAYC,WAAZ,IAA4BV,QAAQ,CAAC;AAAEW,IAAAA,QAAQ,EAAE,KAAZ;AAAmBC,IAAAA,IAAI,EAAET;AAAzB,GAAD,CAA1C;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAACM,aAAD,IAAkBC,eAAlB,IAAqC,CAACC,QAAQ,CAACE,QAAnD,EAA6D;AACzD,qBAAeE,YAAf,GAA+B;AAC3BC,QAAAA,OAAO,CAACC,GAAR,CAAY;AAACV,UAAAA;AAAD,SAAZ;AACAH,QAAAA,QAAQ,CAACc,WAAT,CAAqBX,IAAI,CAACY,GAA1B,EAA+BC,IAA/B,CAAoCN,IAAI,IAAI;AACxCF,UAAAA,WAAW,CAAC;AAACC,YAAAA,QAAQ,EAAE,IAAX;AAAiBC,YAAAA,IAAI,EAAEA;AAAvB,WAAD,CAAX;AACH,SAFD;AAGH;;AACDC,MAAAA,YAAY;AACf;AACJ,GAVQ,CAAT;AAYA,SAAO;AACHN,IAAAA,aADG;AAEHC,IAAAA,eAFG;AAGHW,IAAAA,YAAY,EAAEV,QAAQ,CAACE,QAHpB;AAIHF,IAAAA,QAAQ,EAAEA,QAAQ,CAACG,IAJhB;AAKHQ,IAAAA,MAAM,EAAEf,IAAI,GAAGA,IAAI,CAACY,GAAR,GAAc;AALvB,GAAP;AAQH;;GAzBQb,W;UAEuDL,Q;;;AAyBhE,eAAeK,WAAf","sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport database, { defaultUserData } from \"./database\";\r\n\r\nfunction useUserData() {\r\n\r\n    const { user, isLoading: isLoadingAuth, isAuthenticated } = useAuth0();\r\n    const [ userData, setUserData ] = useState({ isLoaded: false, data: defaultUserData })\r\n    \r\n    useEffect(() => {\r\n        if (!isLoadingAuth && isAuthenticated && !userData.isLoaded) {\r\n            async function loadUserData () {\r\n                console.log({user})\r\n                database.getUserData(user.sub).then(data => {\r\n                    setUserData({isLoaded: true, data: data})\r\n                })\r\n            }\r\n            loadUserData();\r\n        }\r\n    })\r\n\r\n    return { \r\n        isLoadingAuth,\r\n        isAuthenticated,\r\n        isLoadedUser: userData.isLoaded,\r\n        userData: userData.data,\r\n        userID: user ? user.sub : null\r\n    }\r\n    \r\n}\r\n\r\nexport default useUserData;"]},"metadata":{},"sourceType":"module"}