{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { useState, useEffect } from \"react\";\nimport database, { defaultUserData } from \"./database\";\n\nfunction useUserData() {\n  _s();\n\n  const {\n    user,\n    isLoading: isLoadingAuth,\n    isAuthenticated\n  } = useAuth0();\n  const [userData, setUserData] = useState({\n    isLoaded: false,\n    data: defaultUserData()\n  });\n  useEffect(() => {\n    if (!isLoadingAuth && isAuthenticated && !userData.isLoaded) {\n      async function loadUserData() {\n        database.getUserData(user.sub, user.name, user.picture).then(data => {\n          setUserData({\n            isLoaded: true,\n            data: data\n          });\n        });\n      }\n\n      loadUserData();\n    }\n  });\n  return {\n    isLoadingAuth,\n    isAuthenticated,\n    isLoadedUser: userData.isLoaded,\n    userData: userData.data,\n    userID: user ? user.sub : null\n  };\n}\n\n_s(useUserData, \"2/biRoDNotbLj1UarXs+F4Yw/Uw=\", false, function () {\n  return [useAuth0];\n});\n\nexport default useUserData;","map":{"version":3,"sources":["D:/Bureau/Projets Perso/React APP/coman-app/src/utils/hooks/useUserData.jsx"],"names":["useAuth0","useState","useEffect","database","defaultUserData","useUserData","user","isLoading","isLoadingAuth","isAuthenticated","userData","setUserData","isLoaded","data","loadUserData","getUserData","sub","name","picture","then","isLoadedUser","userID"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,oBAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,OAAOC,QAAP,IAAmBC,eAAnB,QAA0C,YAA1C;;AAEA,SAASC,WAAT,GAAuB;AAAA;;AACtB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,SAAS,EAAEC,aAAnB;AAAkCC,IAAAA;AAAlC,MAAsDT,QAAQ,EAApE;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC;AAAEW,IAAAA,QAAQ,EAAE,KAAZ;AAAmBC,IAAAA,IAAI,EAAET,eAAe;AAAxC,GAAD,CAAxC;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI,CAACM,aAAD,IAAkBC,eAAlB,IAAqC,CAACC,QAAQ,CAACE,QAAnD,EAA6D;AAC5D,qBAAeE,YAAf,GAA8B;AAC7BX,QAAAA,QAAQ,CAACY,WAAT,CAAqBT,IAAI,CAACU,GAA1B,EAA+BV,IAAI,CAACW,IAApC,EAA0CX,IAAI,CAACY,OAA/C,EAAwDC,IAAxD,CAA8DN,IAAD,IAAU;AACtEF,UAAAA,WAAW,CAAC;AAAEC,YAAAA,QAAQ,EAAE,IAAZ;AAAkBC,YAAAA,IAAI,EAAEA;AAAxB,WAAD,CAAX;AACA,SAFD;AAGA;;AACDC,MAAAA,YAAY;AACZ;AACD,GATQ,CAAT;AAWA,SAAO;AACNN,IAAAA,aADM;AAENC,IAAAA,eAFM;AAGNW,IAAAA,YAAY,EAAEV,QAAQ,CAACE,QAHjB;AAINF,IAAAA,QAAQ,EAAEA,QAAQ,CAACG,IAJb;AAKNQ,IAAAA,MAAM,EAAEf,IAAI,GAAGA,IAAI,CAACU,GAAR,GAAc;AALpB,GAAP;AAOA;;GAtBQX,W;UACoDL,Q;;;AAuB7D,eAAeK,WAAf","sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport database, { defaultUserData } from \"./database\";\r\n\r\nfunction useUserData() {\r\n\tconst { user, isLoading: isLoadingAuth, isAuthenticated } = useAuth0();\r\n\tconst [userData, setUserData] = useState({ isLoaded: false, data: defaultUserData() });\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isLoadingAuth && isAuthenticated && !userData.isLoaded) {\r\n\t\t\tasync function loadUserData() {\r\n\t\t\t\tdatabase.getUserData(user.sub, user.name, user.picture).then((data) => {\r\n\t\t\t\t\tsetUserData({ isLoaded: true, data: data });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tloadUserData();\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tisLoadingAuth,\r\n\t\tisAuthenticated,\r\n\t\tisLoadedUser: userData.isLoaded,\r\n\t\tuserData: userData.data,\r\n\t\tuserID: user ? user.sub : null,\r\n\t};\r\n}\r\n\r\nexport default useUserData;\r\n"]},"metadata":{},"sourceType":"module"}